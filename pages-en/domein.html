<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kras design - domain</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" media="screen and (max-width: 450px)" href="../css-tablet/huisstijl.css">
    <link rel="stylesheet" media="screen and (min-width: 450px)" href="../css/huisstijl.css">
    <link rel="stylesheet" media="screen and (max-width: 450px)" href="../css-tablet/domein.css">
    <link rel="stylesheet" media="screen and (min-width: 450px)" href="../css/domein.css">
</head>
<body>
<div id="header">
    <div id="banner">
        <img src="../img/logo.png" id="logo">
        <div id="title">
            <h1>Kras design</h1>
            <h2>A Kras mediaconcept for every company</h2>
        </div>
        <div id="languages">
            <a href="../pages-nl/domein.html"><button id="dutchButton">Nederlands</button></a>
            <a href="domein.html"><button id="englishButton">English</button></a>
        </div>

    </div>
    <div id="nav">
        <a href="../index-en.html" class="navItem">Home</a>
        <a href="diensten.html" class="navItem">Services</a>
        <a href="portofolio.html" class="navItem">Portofolio</a>
        <a href="verhuizing.html" class="navItem">Moving</a>
        <a href="domein.html" class="navItem">Domain</a>
        <a href="over_ons.html" class="navItem">About us and contact</a>
    </div>
</div>
<div id="main">
    <h1>Deomein check tool</h1>
    <p>Enter the domain you wish to purchase and we will check it's availability for you</p>
    <form>
        <label>Email address:</label>
        <br>
        <input type="url" id="domain">
        <input type="button" id="checkButton" value="Check" onclick="validate_test(document.getElementById('domain').innerText)" >
    </form>
    <p id="domainUnavailbable">Domein is unavailable</p>
    <p id="domainAvailable">Domein is available</p>
    <button id="registerButton">register</button>
</div>
<div id="footer">
    <p>
        twitter: @krasdesign
        <br>
        instagram: @krasdesign
    </p>
    <p>
        Phone number 0000000000<br>
        Address: 4444be straatnaam 55, stadsnaam<br>
        email address: krasdesign@mail.com
    </p>
    <p>
        Made by: Kras design
    </p>
</div>
<script>
    function validate_test(url) {
        document.getElementById('registerButton').style.display = "none";
        document.getElementById('domainUnavailbable').style.display = "none";
        document.getElementById('domainAvailable').style.display = "none";
        if (Math.random() > 0.5) {
            document.getElementById('domainAvailable').style.display = "block";
            document.getElementById('registerButton').style.display = "block";
        }
        else {
            document.getElementById('domainUnavailbable').style.display = "block";
        }
    }

    function validate(url) {
        ping(url).then(function(e) {
            if (e === 'true') {
                document.getElementById('domainAvailable').style.display = "block";
                document.getElementById('registerButton').style.display = "block";
            } else {
                document.getElementById('domainUnavailbable').style.display = "block";
            }
        }).catch(function(err) {
            document.getElementById('domainUnavailbable').style.display = "block";
        });
    }

    function ping(url) {
        return new Promise(function(resolve, reject) {

            const xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == XMLHttpRequest.DONE) {
                    if (xmlhttp.status == 200) {
                        const e = JSON.parse(xmlhttp.response).exists;
                        resolve(e);
                    }
                    else if (xmlhttp.status == 400) {
                        reject(false);
                    }
                    else {
                        reject(false);
                    }
                }
            }
            xmlhttp.open("GET", 'http://www.dennisvanriet.nl/ping/ping_ws.php?url=' + url + '&t=' + Math.random(), true);
            xmlhttp.send();
        });
    }
</script>
</body>
<script>
    const bodyLength = document.getElementById("main");
    console.log(bodyLength.offsetHeight);
    console.log(screen.height - 270);
    if (bodyLength.offsetHeight < screen.height - 270) {
        const length = screen.height - 400;
        document.body.style.gridTemplateRows = "200px " + length.toString() + "px 70px"
    }
</script>
</html>